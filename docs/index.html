<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl">
  <title data-ice="title">Home | xeokit-bim-viewer</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="BIM viewer built on xeokit"><meta property="og:type" content="website"><meta property="og:url" content="https://github.com/xeokit/xeokit-bim-viewer"><meta property="og:site_name" content="xeokit-bim-viewer"><meta property="og:title" content="xeokit-bim-viewer"><meta property="og:image" content="./images/logo.jpg"><meta property="og:description" content="BIM viewer built on xeokit"><meta property="og:author" content="http://xeolabs.com"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="xeokit-bim-viewer"><meta property="twitter:description" content="BIM viewer built on xeokit"><meta property="twitter:image" content="./images/logo.jpg"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./" style="display: flex; align-items: center;"><img src="./image/brand_logo.jpg" style="width:34px;"></a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/xeokit/xeokit-bim-viewer"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/BIMViewer.js~BIMViewer.html">BIMViewer</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#ifcobjectdefaults">IFCObjectDefaults</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ViewerIFCObjectColors">ViewerIFCObjectColors</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#server">server</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/server/Server.js~Server.html">Server</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><div data-ice="index" class="github-markdown"><h1 id="xeokit-bim-viewer">xeokit-bim-viewer</h1><p><strong>xeokit-bim-viewer</strong> is an open source BIM viewer for the Web. It uses the <a href="http://xeokit.io">xeokit SDK</a> for hardware-accelerated graphics, and is cross-platform, cross-browser, and geared for visualizing large, real-world BIM models.</p>
<p>The viewer is developed by <a href="http://xeolabs.com">xeolabs</a> and <a href="https://www.openproject.org/">OpenProject GmbH</a>, and is integrated  within OpenProject&apos;s BIM construction project management software. </p>
<p>The viewer is also usable as a stand-alone viewer. Simply fork this repository, add your own models to the <a href="https://github.com/xeokit/xeokit-bim-viewer/tree/master/app/data"><code>.app/data</code></a> directory, then host it via <a href="https://help.github.com/en/github/working-with-github-pages/about-github-pages">GitHub Pages</a>. You can also just download the repository to your own HTTP server and serve everything from there. </p>
<p>To serve your own models with this viewer, all you need to do is convert their IFC STEP files using open source CLI tools and drop them into the viewer&apos;s data directory. Read the guide below for more info.  </p>
<p>The viewer is bundled with the <a href="http://xeokit.io">xeokit SDK</a> - see the <a href="https://xeokit.io/index.html#pricing">Pricing</a> for licensing details.</p>
<hr>
<ul>
<li><a href="https://xeokit.github.io/xeokit-bim-viewer/">Homepage</a></li>
<li><a href="https://github.com/xeokit/xeokit-bim-viewer">Source Code</a></li>
<li><a href="https://xeokit.github.io/xeokit-bim-viewer/docs">API Docs</a></li>
<li><p><a href="http://xeokit.io">xeokit SDK</a></p>
<hr>
</li>
</ul>
<h2 id="-a-href--https---xeokit-github-io-xeokit-bim-viewer-app-index-html-projectid-otcconferencecenter-amp-tab-storeys---img-src--https---github-com-xeokit-xeokit-bim-viewer-raw-master-images-xeokit-bim-viewer-png--alt--screenshot----a-"><a href="https://xeokit.github.io/xeokit-bim-viewer/app/index.html?projectId=OTCConferenceCenter&amp;tab=storeys"><img src="https://github.com/xeokit/xeokit-bim-viewer/raw/master/images/xeokit-bim-viewer.png" alt="Screenshot"></a></h2><h2 id="contents">Contents</h2><ul>
<li><a href="#features">Features</a></li>
<li><a href="#demos">Demos</a></li>
<li><a href="#license">License</a></li>
<li><a href="#creating-a-viewer">Creating a Viewer</a></li>
<li><a href="#configuring-the-viewer">Configuring the Viewer</a></li>
<li><a href="#customizing-viewer-style">Customizing Viewer Style</a><ul>
<li><a href="#modal-busy-dialog">Modal Busy Dialog</a></li>
<li><a href="#tooltips">Tooltips</a></li>
<li><a href="#customizing-appearances-of-ifc-types">Customizing Appearances of IFC Types</a></li>
</ul>
</li>
<li><a href="#programming-api">Programming API</a><ul>
<li><a href="#querying-info-on-projects">Querying Info on Projects</a></li>
<li><a href="#querying-info-on-a-project">Querying Info on a Project</a></li>
<li><a href="#loading-a-project">Loading a Project</a></li>
<li><a href="#loading-a-model">Loading a Model</a></li>
<li><a href="#model-database">Model Database</a></li>
</ul>
</li>
<li><a href="#adding-your-own-models">Adding Your Own Models</a><ul>
<li><a href="#loading-models-from-a-custom-source">Loading models from a custom source</a></li>
</ul>
</li>
<li><a href="#building">Building</a></li>
</ul>
<h2 id="features">Features</h2><ul>
<li>Uses <a href="https://xeokit.io">xeokit SDK</a> for super fast loading and rendering of large models.</li>
<li>Works in all major browsers, including mobile.</li>
<li>Loads BIM geometry and metadata from the file system.</li>
<li>Loads multiple models, at arbitrary position, scale and rotation.</li>
<li>Configure custom appearances for IFC types.</li>
<li>Supports IFC2x3 and IFC4.</li>
<li>3D and 2D viewing modes.</li>
<li>Tree view with three hierarchy modes: containment structure, IFC layers and storeys.</li>
<li>X-ray, highlight, show, hide and slice objects. </li>
<li>Customize with your own CSS.</li>
<li>JavaScript programming API - load models, move camera, show/hide/select/xray objects etc.</li>
<li>Implemented in JavaScript (ES6).</li>
</ul>
<h2 id="demos">Demos</h2><table>
<thead>
<tr>
<th>Live Demo</th>
<th>Model Source</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://xeokit.github.io/xeokit-bim-viewer/app/index.html?projectId=OTCConferenceCenter&amp;tab=storeys">OTC Conference Center</a></td>
<td><a href="http://openifcmodel.cs.auckland.ac.nz/Model/Details/301">Details</a></td>
</tr>
<tr>
<td><a href="https://xeokit.github.io/xeokit-bim-viewer/app/index.html?projectId=HolterTower&amp;tab=storeys">Holter Tower</a></td>
<td><a href="http://openifcmodel.cs.auckland.ac.nz/Model/Details/316">Details</a></td>
</tr>
<tr>
<td><a href="https://xeokit.github.io/xeokit-bim-viewer/app/index.html?projectId=WestRiversideHospital&amp;tab=models">West Riverside Hospital</a></td>
<td><a href="http://openifcmodel.cs.auckland.ac.nz/Model/Details/308">Details</a></td>
</tr>
<tr>
<td><a href="https://xeokit.github.io/xeokit-bim-viewer/app/index.html?projectId=Schependomlaan&amp;tab=storeys">Schependomlaan</a></td>
<td><a href="https://github.com/openBIMstandards/DataSetSchependomlaan">Details</a></td>
</tr>
<tr>
<td><a href="https://xeokit.github.io/xeokit-bim-viewer/app/index.html?projectId=Schependomlaan_selectedStorey&amp;tab=storeys">Schependomlaan Ground Floor</a></td>
<td><a href="https://github.com/openBIMstandards/DataSetSchependomlaan">Details</a></td>
</tr>
<tr>
<td><a href="https://xeokit.github.io/xeokit-bim-viewer/app/index.html?projectId=Duplex&amp;tab=storeys">Duplex</a></td>
<td><a href="http://openifcmodel.cs.auckland.ac.nz/Model/Details/274">Details</a></td>
</tr>
</tbody>
</table>
<h2 id="license">License</h2><p>xeokit-bim-viewer is bundled with the xeokit SDK, which is provided under an <a href="https://github.com/xeokit/xeokit-sdk/blob/master/LICENSE.txt">Affero GPL V3</a> dual-license, which allows free use for non-commercial purposes, with the option to buy a licence for commercial use. Please <a href="https://xeokit.io/index.html#pricing">Pricing</a> for commercial licensing options.</p>
<h2 id="programming-api">Programming API</h2><p><a href="https://xeokit.github.io/xeokit-bim-viewer/docs/class/src/BIMViewer.js~BIMViewer.html"><code>BIMViewer</code></a> provides a complete set of methods to programmatically control it with JavaScript.</p>
<p>Using these methods, we can create and configure a viewer, query what models are available, load models, interact with the 3D view, control the various tools, and even control the UI itself.</p>
<h3 id="creating-a-viewer">Creating a Viewer</h3><p>In the example below, we&apos;ll create a <a href="https://xeokit.github.io/xeokit-bim-viewer/docs/class/src/BIMViewer.js~BIMViewer.html"><code>BIMViewer</code></a>, with a <a href="https://xeokit.github.io/xeokit-bim-viewer/docs/class/src/server/Server.js~Server.html"><code>Server</code></a> through which it will load project and model data from the file system.  </p>
<p>We&apos;ll configure the <code>Server</code> to load the data from the <a href="https://github.com/xeokit/xeokit-bim-viewer/tree/master/app/data"><code>.app/data</code></a> directory.</p>
<p>We also configure our <code>BimViewer</code> with DOM elements for the four parts of its UI: </p>
<ul>
<li><code>canvasElement</code> - a <code>&lt;canvas&gt;</code> for the 3D canvas, </li>
<li><code>explorerElement</code> - a <code>&lt;div&gt;</code> to contain the explorer panel, </li>
<li><code>toolbarElement</code> - a <code>&lt;div&gt;</code> to contain the toolbar, </li>
<li><code>navCubeCanvasElement</code> - a <code>&lt;canvas&gt;</code> for the NavCube, and </li>
<li><code>busyModelBackdropElement</code> - an element to use as the backdrop for the busy-loading modal dialog, which will block events on the viewer while the dialog is showing. </li>
</ul>
<p>Configuring the <code>BIMViewer</code> with separate places to locate those elements allows flexible integration into your web page.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const server = new Server({
     dataDir: &quot;./data&quot;
 });

const myBIMViewer = new BIMViewer(server, {
     canvasElement: document.getElementById(&quot;myCanvas&quot;), // WebGL canvas
     explorerElement: document.getElementById(&quot;myExplorer&quot;), // Explorer panel
     toolbarElement: document.getElementById(&quot;myToolbar&quot;), // Toolbar
     navCubeCanvasElement: document.getElementById(&quot;myNavCubeCanvas&quot;),
     busyModelBackdropElement: document.querySelector(&quot;.xeokit-busy-modal-backdrop&quot;)
});</code>
</code></pre>
<p>In our <a href="https://github.com/xeokit/xeokit-bim-viewer/blob/master/app/index.html"><code>app/index.html</code></a> page, the elements look like this:</p>
<pre><code class="lang-html"><code class="source-code prettyprint">&lt;div id=&quot;myViewer&quot; class=&quot;xeokit-busy-modal-backdrop&quot;&gt;
     &lt;div id=&quot;myExplorer&quot; class=&quot;active&quot;&gt;&lt;/div&gt;
     &lt;div id=&quot;myContent&quot;&gt;
         &lt;div id=&quot;myToolbar&quot;&gt;&lt;/div&gt;
         &lt;canvas id=&quot;myCanvas&quot;&gt;&lt;/canvas&gt;
     &lt;/div&gt;
 &lt;/div&gt;
 &lt;canvas id=&quot;myNavCubeCanvas&quot;&gt;&lt;/canvas&gt;</code>
</code></pre>
<p>See <a href="https://github.com/xeokit/xeokit-bim-viewer/blob/master/app/css/style.css"><code>app/css/style.css</code></a> for how we&apos;ve styled these elements. See <a href="https://github.com/xeokit/xeokit-bim-viewer/blob/master/css/BIMViewer.css"><code>css/BIMViewer.css</code></a> for the CSS styles that BIMViewer applies to its internally-created HTML.  </p>
<h3 id="configuring-the-viewer">Configuring the Viewer</h3><p>Use <a href="https://xeokit.github.io/xeokit-bim-viewer/docs/class/src/BIMViewer.js~BIMViewer.html#instance-method-setConfigs">BIMViewer#setConfigs()</a> to configure your viewer:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">myBIMViewer.setConfigs({
    &quot;saoEnabled&quot;:        &quot;false&quot;,
    &quot;saoBias&quot;:           &quot;0.5&quot;,
    &quot;saoIntensity&quot;:      &quot;0.5&quot;,
    &quot;backgroundColor&quot;:   [1.0, 1.0, 1.0]
});</code>
</code></pre>
<p>The complete set of available configurations is:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Property</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Range</th>
<th style="text-align:left">Default Value</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">&quot;backgroundColor&quot;</td>
<td style="text-align:left">Array</td>
<td style="text-align:left"></td>
<td style="text-align:left"><code>[1.0,1.0,1.0]</code></td>
<td style="text-align:left">Canvas background color</td>
</tr>
<tr>
<td style="text-align:left">&quot;cameraNear&quot;</td>
<td style="text-align:left">Number</td>
<td style="text-align:left"><code>[0.01-0.1]</code></td>
<td style="text-align:left"><code>0.05</code></td>
<td style="text-align:left">Distance to the near clipping plane</td>
</tr>
<tr>
<td style="text-align:left">&quot;cameraFar&quot;</td>
<td style="text-align:left">Number</td>
<td style="text-align:left"><code>[1-10000]</code></td>
<td style="text-align:left"><code>3000.0</code></td>
<td style="text-align:left">Distance to the far clipping plane</td>
</tr>
<tr>
<td style="text-align:left">&quot;saoEnabled&quot;</td>
<td style="text-align:left">Boolean</td>
<td style="text-align:left"></td>
<td style="text-align:left"><code>false</code></td>
<td style="text-align:left">Whether or not to enable Scalable Ambient Obscurance (SAO)</td>
</tr>
<tr>
<td style="text-align:left">&quot;saoBias&quot;</td>
<td style="text-align:left">Number</td>
<td style="text-align:left"><code>[0.0...10.0]</code></td>
<td style="text-align:left"><code>0.5</code></td>
<td style="text-align:left">SAO bias</td>
</tr>
<tr>
<td style="text-align:left">&quot;saoIntensity&quot;</td>
<td style="text-align:left">Number</td>
<td style="text-align:left"><code>[0.0...200.0]</code></td>
<td style="text-align:left"><code>100.0</code></td>
<td style="text-align:left">SAO intensity factor</td>
</tr>
<tr>
<td style="text-align:left">&quot;saoScale&quot;</td>
<td style="text-align:left">Number</td>
<td style="text-align:left"><code>[0.0...1000.0]</code></td>
<td style="text-align:left"><code>500.0</code></td>
<td style="text-align:left">SAO scale factor</td>
</tr>
<tr>
<td style="text-align:left">&quot;saoKernelRadius&quot;</td>
<td style="text-align:left">Number</td>
<td style="text-align:left"><code>[0.0...200.0]</code></td>
<td style="text-align:left"><code>100.0</code></td>
<td style="text-align:left">The maximum area that SAO takes into account when checking for possible occlusion</td>
</tr>
<tr>
<td style="text-align:left">&quot;saoBlur&quot;</td>
<td style="text-align:left">Boolean</td>
<td style="text-align:left"></td>
<td style="text-align:left"><code>true</code></td>
<td style="text-align:left">Whether Guassian blur is enabled for SAO</td>
</tr>
<tr>
<td style="text-align:left">&quot;saoInteractive&quot;</td>
<td style="text-align:left">Boolean</td>
<td style="text-align:left"></td>
<td style="text-align:left"><code>true</code></td>
<td style="text-align:left">When <code>true</code>, applies SAO when moving the camera, otherwise applies it once the camera stops moving</td>
</tr>
<tr>
<td style="text-align:left">&quot;saoInteractiveDelay&quot;</td>
<td style="text-align:left">Number</td>
<td style="text-align:left"></td>
<td style="text-align:left"><code>200</code></td>
<td style="text-align:left">when &quot;saoInteractive&quot; is <code>false</code>, this is the time delay in milliseconds after which SAO is applied after the camera has stopped moving</td>
</tr>
<tr>
<td style="text-align:left">&quot;viewFitFOV&quot;</td>
<td style="text-align:left">Number</td>
<td style="text-align:left"><code>[10.0...70.0]</code></td>
<td style="text-align:left"><code>30</code></td>
<td style="text-align:left">When fitting objects to view, this is the amount in degrees of how much they should fit the user&apos;s field of view</td>
</tr>
<tr>
<td style="text-align:left">&quot;viewFitDuration&quot;</td>
<td style="text-align:left">Number</td>
<td style="text-align:left"><code>[0..5]</code></td>
<td style="text-align:left"><code>0.5</code></td>
<td style="text-align:left">When fitting objects to view with an animated transition, this is the duration of the transition in seconds</td>
</tr>
<tr>
<td style="text-align:left">&quot;perspectiveFOV&quot;</td>
<td style="text-align:left">Number</td>
<td style="text-align:left"><code>[10.0...70.0]</code></td>
<td style="text-align:left"><code>55</code></td>
<td style="text-align:left">When in perspective projection, this is the field of view, in degrees, that the user sees</td>
</tr>
<tr>
<td style="text-align:left">&quot;objectColorSource&quot;</td>
<td style="text-align:left">String</td>
<td style="text-align:left">&quot;model&quot;, &quot;viewer&quot;</td>
<td style="text-align:left">&quot;model&quot;</td>
<td style="text-align:left">Where the colors for model objects will be loaded from</td>
</tr>
</tbody>
</table>
<h3 id="querying-projects--models-and-objects">Querying Projects, Models and Objects</h3><h4 id="getting-info-on-available-projects">Getting Info on Available Projects</h4><p>Let&apos;s start off by querying what projects are available. Since we&apos;re using the default <a href="https://xeokit.github.io/xeokit-bim-viewer/docs/class/src/server/Server.js~Server.html"><code>Server</code></a>, this will be the JSON in <a href="https://github.com/xeokit/xeokit-bim-viewer/tree/master/app/data/projects/index.json"><code>.app/data/projects/index.json</code></a>. We&apos;ll just log that information to the console.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">myBIMViewer.getProjectsInfo((projectsInfo) =&gt; {
     console.log(JSON.stringify(projectsInfo, null, &quot;\t&quot;));
});</code>
</code></pre>
<p>The projects JSON will be similar to:</p>
<pre><code class="lang-json"><code class="source-code prettyprint">{
     &quot;projects&quot;: [
         {
             &quot;id&quot;: &quot;Duplex&quot;,
             &quot;name&quot;: &quot;Duplex&quot;
         },
         {
             &quot;id&quot;: &quot;Schependomlaan&quot;,
             &quot;name&quot;: &quot;Schependomlaan&quot;
         },
         {
             &quot;id&quot;: &quot;WestRiversideHospital&quot;,
             &quot;name&quot;: &quot;West Riverside Hospital&quot;
         }
      ]
}</code>
</code></pre>
<h4 id="getting-info-on-a-project">Getting Info on a Project</h4><p>Now let&apos;s query some info on one of the projects.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">myBIMViewer.getProjectInfo(&quot;WestRiversideHospital&quot;, (projectInfo) =&gt; {
     console.log(JSON.stringify(projectInfo, null, &quot;\t&quot;));
});</code>
</code></pre>
<p>The project JSON will be similar to:</p>
<pre><code class="lang-json"><code class="source-code prettyprint">{
    &quot;id&quot;: &quot;WestRiversideHospital&quot;,
    &quot;name&quot;: &quot;West Riverside Hospital&quot;,
    &quot;models&quot;: [
        {
            &quot;id&quot;: &quot;architectural&quot;,
            &quot;name&quot;: &quot;Hospital Architecture&quot;
        },
        {
            &quot;id&quot;: &quot;structure&quot;,
            &quot;name&quot;: &quot;Hospital Structure&quot;
        },
        {
            &quot;id&quot;: &quot;electrical&quot;,
            &quot;name&quot;: &quot;Hospital Electrical&quot;,
            &quot;saoEnabled&quot;: false
        }
    ],
    &quot;viewerConfigs&quot;: {
        &quot;backgroundColor&quot;: [0.9, 0.9, 1.0],
        &quot;saoEnabled&quot;: true,
        &quot;saoIntensity&quot;: 0.7,
        &quot;saoScale&quot;: 1200.0,
        &quot;saoInteractive&quot;: false,
        &quot;saoInteractiveDelay&quot;: 200
    },
    &quot;viewerContent&quot;: {
        &quot;modelsLoaded&quot;: [
            &quot;structure&quot;,
            &quot;architectural&quot;
        ]
    },
    &quot;viewerState&quot;: {
        &quot;tabOpen&quot;: &quot;models&quot;
    }
}</code>
</code></pre>
<p>In this project info, we have:</p>
<ul>
<li><strong><code>id</code></strong> - ID of the project,</li>
<li><strong><code>name</code></strong> - human-readable name of the project, </li>
<li><strong><code>models</code></strong> - info on each model in this project,</li>
<li><strong><code>viewerConfigs</code></strong> - viewer configurations to apply when loading the project,</li>
<li><strong><code>viewerContent</code></strong> - which models to load immediately when loading the project, and</li>
<li><strong><code>viewerState</code></strong> - how the viewer should set up its UI after loading the project.</li>
</ul>
<p>When we load the project (in a later section), the viewer is going to pass the <code>viewerConfigs</code> to <a href>BIMViewer#setConfigs()</a>, which we described in <a href="#configuring-the-viewer">Configuring the Viewer</a>. </p>
<p>In the <code>viewerConfigs</code> we&apos;re enabling the viewer&apos;s Scalable Ambient Obscurance effect, which will create ambient shadows in the crevices of our models. This is an expensive effect for the viewer tp render, so we&apos;ve disabled it for the &quot;electrical&quot; model, which contains many long, thin wire objects that  </p>
<h4 id="getting-info-on-an-object">Getting Info on an Object</h4><p>Let&apos;s attempt to get some information on an object within one of our project&apos;s models.</p>
<p>We say &quot;attempt&quot; because it&apos;s up to the <a href="https://xeokit.github.io/xeokit-bim-viewer/docs/class/src/server/Server.js~Server.html"><code>Server</code></a> to try to find that information for us. Internally, the viewer will call <a href="https://xeokit.github.io/xeokit-bim-viewer/docs/class/src/server/Server.js~Server.html#instance-method-getObjectInfo"><code>Server#getObjectInfo()</code></a>, which will attempt to load that object information from a file. Were you to substitute <code>Server</code> with your own implementation, your implementation could be sourcing that information from a data store, such as a relational database, populated with metadata for all the objects in your project&apos;s models, keyed to their IDs. </p>
<p>We&apos;ll go ahead and assume that our <code>Server</code> has that object information. </p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">myViewer.getObjectInfo(&quot;WestRiversideHospital&quot;, &quot;architectural&quot;, &quot;2HaS6zNOX8xOGjmaNi_r6b&quot;, 
    (objectInfo) =&gt; {
        console.log(JSON.stringify(objectInfo, null, &quot;\t&quot;));
    },
    (errMsg) =&gt; {
         console.log(&quot;Oops! There was an error getting information for this object: &quot; + errMsg);
    });</code>
</code></pre>
<p>If the object does not exist in the specified project and model, the method will invoke its error callback.</p>
<p>If the object, does exist, then the result we&apos;ll get back will look similar to below. If <code></code></p>
<pre><code class="lang-json"><code class="source-code prettyprint">{
    &quot;id&quot;: &quot;2HaS6zNOX8xOGjmaNi_r6b&quot;,
    &quot;projectId&quot;: &quot;WestRiversideHospital&quot;,
    &quot;modelId&quot;: &quot;architectural&quot;,
    &quot;name&quot;: &quot;Basic Wall:Exterior - Metal Panel on Mtl. Stud:187578&quot;,
    &quot;type&quot;: &quot;IfcWall&quot;,
    &quot;parent&quot;: &quot;2hExBg8jj4NRG6zzD0RZML&quot;
}</code>
</code></pre>
<h3 id="loading-projects-and-models">Loading Projects and Models</h3><h4 id="loading-a-project">Loading a Project</h4><p>Let&apos;s load the project we just queried info on. </p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">myBIMViewer.loadProject(&quot;WestRiversideHospital&quot;, 
    () =&gt; {
         console.log(&quot;Nice! The project loaded successfully.&quot;);
    },
    (errMsg) =&gt; {
         console.log(&quot;Oops! There was an error loading this project: &quot; + errMsg);
    });</code>
</code></pre>
<p>If that succeeds, the viewer will now have two models loaded: <code>&quot;architectural&quot;</code> and <code>&quot;structure&quot;</code>.</p>
<p>The viewer will also open its &quot;Models&quot; tab open, thanks to the <code>tabOpen</code> property in the <code>viewerState</code> section of the project info (see previous section).</p>
<p>We can confirm that the two models are loaded by querying the IDs of the models that are currently loaded in the viewer:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const modelIds = myBIMViewer.getModelLoadedIds();

console.log(modelIds);</code>
</code></pre>
<p>The result would be:</p>
<pre><code class="lang-json"><code class="source-code prettyprint">[&quot;architectural&quot;, &quot;structure&quot;]</code>
</code></pre>
<h4 id="loading-a-model">Loading a Model</h4><p>With our project loaded, let&apos;s load another of its models.</p>
<p>We could start by getting the IDs of all the models in our project, just to make sure it&apos;s there:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const modelIds = myBIMViewer.getModelIds();

console.log(modelIds);</code>
</code></pre>
<p>The result would be:</p>
<pre><code class="lang-json"><code class="source-code prettyprint">[&quot;architectural&quot;, &quot;structure&quot;, &quot;electrical&quot;]</code>
</code></pre>
<p>To load the model:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">myBIMViewer.loadModel(&quot;electrical&quot;, 
    () =&gt; {
         console.log(&quot;Nice! The model loaded successfully.&quot;);
    },
    (errMsg) =&gt; {
         console.log(&quot;Oops! There was an error loading this model: &quot; + errMsg);
    });</code>
</code></pre>
<p>If we no longer need that model, we can unload it again:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">myBIMViewer.unloadModel(&quot;electrical&quot;);</code>
</code></pre>
<h3 id="controlling-viewer-state">Controlling Viewer State</h3><p><a href="https://xeokit.github.io/xeokit-bim-viewer/docs/class/src/BIMViewer.js~BIMViewer.html"><code>BIMViewer</code></a> has various methods with which we can programmatically control the state of its UI. </p>
<p>Let&apos;s take a quick look at some of these methods to get an idea of what sort of UI state we can control with them. This won&apos;t be an exhaustive guide - see the <code>BIMViewer</code> class documentation for the complete list.</p>
<p>Having loaded a couple of models in the previous section, let&apos;s open the viewer&apos;s Objects tab, which contains a tree view of the containment hierarchy of the objects within those models:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">myBIMViewer.openTab(&quot;objects&quot;);</code>
</code></pre>
<p>To confirm which tab is currently open: </p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const tabId = myBIMViewer.getOpenTab();

console.log(&quot;Currently open tab: &apos;&quot; + tabId + &quot;&apos;&quot;); // &quot;objects&quot;</code>
</code></pre>
<p>Now let&apos;s arrange the camera to fit an object in view:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">myBIMViewer.flyToObject(&quot;1fOVjSd7T40PyRtVEklS6X&quot;, ()=&gt;{ /* Done */ });</code>
</code></pre>
<p>TODO: Complete this section once API methods are finalized</p>
<h3 id="model-database">Model Database</h3><p>The viewer loads models from the file system by default. These are contained within the <a href="https://github.com/xeokit/xeokit-bim-viewer/tree/master/data">./data</a> directory, which also contains a number of sample models to get you started. </p>
<p>Each model consists of an <code>.XKT</code> binary geometry file and a JSON metadata file which classifies its IFC elements. </p>
<p>Models are grouped within <em>projects</em>. Each project can contain multiple models, and has a JSON <code>index.json</code> manifest which lists its models.</p>
<p>At the root of <code>./data</code> is a JSON <code>index.json</code> manifest that lists all the projects.</p>
<p>The directory structure is designed to support RESTful queries, ie:</p>
<table>
<thead>
<tr>
<th>Query</th>
<th>Path</th>
</tr>
</thead>
<tbody>
<tr>
<td>Get all projects</td>
<td><code>GET ./data/index.json</code></td>
</tr>
<tr>
<td>Get project</td>
<td><code>GET ./data/WestRiversideHospital/index.json</code></td>
</tr>
<tr>
<td>Get model geometry</td>
<td><code>GET ./data/WestRiversideHospital/electrical/geometry.xkt</code></td>
</tr>
<tr>
<td>Get model metadata</td>
<td><code>GET ./data/WestRiversideHospital/electrical/metadata.json</code></td>
</tr>
</tbody>
</table>
<p>Shown below is a portion of the <code>./data</code> directory, showing the directory structure.</p>
<pre><code><code class="source-code prettyprint">./data/
&#x2514;&#x2500;&#x2500; projects
    &#x251C;&#x2500;&#x2500; index.json
    &#x251C;&#x2500;&#x2500; Duplex
    &#x2502;   &#x251C;&#x2500;&#x2500; index.json
    &#x2502;   &#x2514;&#x2500;&#x2500; models
    &#x2502;       &#x2514;&#x2500;&#x2500; design
    &#x2502;           &#x251C;&#x2500;&#x2500; geometry.xkt
    &#x2502;           &#x251C;&#x2500;&#x2500; issues.json
    &#x2502;           &#x2514;&#x2500;&#x2500; metadata.json
    &#x2514;&#x2500;&#x2500; WestRiversideHospital
          &#x251C;&#x2500;&#x2500; index.json
          &#x2514;&#x2500;&#x2500; models
              &#x251C;&#x2500;&#x2500; electrical
              &#x2502;   &#x251C;&#x2500;&#x2500; geometry.xkt
              &#x2502;   &#x2514;&#x2500;&#x2500; metadata.json
              &#x251C;&#x2500;&#x2500; fireAlarms
              &#x2502;   &#x251C;&#x2500;&#x2500; geometry.xkt
              &#x2502;   &#x2514;&#x2500;&#x2500; metadata.json
              &#x251C;&#x2500;&#x2500; plumbing
              &#x2502;   &#x251C;&#x2500;&#x2500; geometry.xkt
              &#x2502;   &#x2514;&#x2500;&#x2500; metadata.json
              &#x251C;&#x2500;&#x2500; sprinklers
              &#x2502;   &#x251C;&#x2500;&#x2500; geometry.xkt
              &#x2502;   &#x2514;&#x2500;&#x2500; metadata.json
              &#x2514;&#x2500;&#x2500; structure
                  &#x251C;&#x2500;&#x2500; geometry.xkt
                  &#x2514;&#x2500;&#x2500; metadata.json</code>
</code></pre><p>The <code>index.json</code> at the root of <code>./data</code> shown below. The <code>id</code> of each project matches the name of that project&apos;s subdirectory. </p>
<pre><code class="lang-json"><code class="source-code prettyprint">{
  &quot;projects&quot;: [
    {
      &quot;id&quot;: &quot;Duplex&quot;,
      &quot;name&quot;: &quot;Duplex&quot;,
      &quot;position&quot;: [-20, 0.0, -10.0],
      &quot;scale&quot;: [1.0, 1.0, 1.0],
      &quot;rotation&quot;: [0.0, 0.0, 0.0]
    },
    {
      &quot;id&quot;: &quot;WestRiversideHospital&quot;,
      &quot;name&quot;: &quot;West Riverside Hospital&quot;,
      &quot;position&quot;: [20, 0.0, 0.0],
      &quot;scale&quot;: [1.0, 1.0, 1.0],
      &quot;rotation&quot;: [0.0, 0.0, 0.0]
    },
    //...
  ]
}</code>
</code></pre>
<p>The <code>index.json</code> for the &quot;WestRiversideHospital&quot; project is shown below. The <code>id</code> of each model matches the name of that model&apos;s subdirectory, while <code>name</code> is the string that&apos;s displayed for the model in the viewers Models tab.</p>
<pre><code class="lang-json"><code class="source-code prettyprint">{
  &quot;id&quot;: &quot;WestRiversideHospital&quot;,
  &quot;name&quot;: &quot;West Riverside Hospital&quot;,
  &quot;models&quot;: [
    {
      &quot;id&quot;: &quot;structure&quot;,
      &quot;name&quot;: &quot;Hospital Structure&quot;,
      &quot;default&quot;: true
    },
    {
      &quot;id&quot;: &quot;electrical&quot;,
      &quot;name&quot;: &quot;Hospital Electrical&quot;
    },
    {
      &quot;id&quot;: &quot;sprinklers&quot;,
      &quot;name&quot;: &quot;Hospital Sprinklers&quot;
    },
    {
      &quot;id&quot;: &quot;plumbing&quot;,
      &quot;name&quot;: &quot;Hospital Plumbing&quot;
    },
    {
      &quot;id&quot;: &quot;fireAlarms&quot;,
      &quot;name&quot;: &quot;Hospital Fire Alarms&quot;
    }
  ]
}</code>
</code></pre>
<h2 id="adding-your-own-models">Adding Your Own Models</h2><p>To add your own project to the database, you need to: </p>
<p>add a new project directory within <code>./data</code>,</p>
<ul>
<li>add a subdirectory within that for each model, containing each model&apos;s <code>.XKT</code> and metadata files,</li>
<li>add a <code>index.json</code> manifest of the models within the project directory, which lists the models, and</li>
<li>list your project in the <code>index.json</code> at the root of <code>./data</code>.    </li>
</ul>
<h4 id="loading-models-from-a-custom-source">Loading models from a custom source</h4><p>To load models from a different source than the file system, configure</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">

</code>
</code></pre>
<h2 id="customizing-viewer-style">Customizing Viewer Style</h2><p>The <a href="https://github.com/xeokit/xeokit-bim-viewer/blob/master/app/index.html">app/index.html</a> file for the standalone viewer contains CSS rules for the various viewer elements, which you can modify as required.</p>
<h3 id="modal-busy-dialog">Modal Busy Dialog</h3><p>As mentioned above, the viewer displays a modal dialog box whenever we load a model. The dialog box has a backdrop element, which overlays the viewer. Whenever the dialog becomes visible, the backdrop will block interaction events on the viewer&apos;s UI. </p>
<p>Within our <a href="https://github.com/xeokit/xeokit-bim-viewer/blob/master/app/index.html"><code>app/index.html</code></a> page, the main <code>&lt;div&gt;</code> is the backdrop element:</p>
<pre><code class="lang-html"><code class="source-code prettyprint">&lt;div id=&quot;myBIMViewer&quot; class=&quot;xeokit-busy-modal-backdrop&quot;&gt;
    &lt;div id=&quot;myExplorer&quot; class=&quot;active&quot;&gt;&lt;/div&gt;
    &lt;div id=&quot;myContent&quot;&gt;
        &lt;div id=&quot;myToolbar&quot;&gt;&lt;/div&gt;
        &lt;canvas id=&quot;myCanvas&quot;&gt;&lt;/canvas&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;canvas id=&quot;myNavCubeCanvas&quot;&gt;&lt;/canvas&gt;</code>
</code></pre>
<p>As defined in <a href="https://github.com/xeokit/xeokit-bim-viewer/blob/master/css/BIMViewer.css"><code>css/BIMViewer.css</code></a>, the backdrop gets the following style, which allows the dialog to position itself correctly within the backdrop:</p>
<pre><code class="lang-css"><code class="source-code prettyprint">.xeokit-busy-modal-backdrop {
    position:relative;
}</code>
</code></pre>
<p>If you need to tweak CSS relating to the dialog, search for &quot;xeokit-busy-dialog&quot; within <a href="https://github.com/xeokit/xeokit-bim-viewer/blob/master/css/BIMViewer.css"><code>css/BIMViewer.css</code></a>.</p>
<h3 id="tooltips">Tooltips</h3><p>Tooltips are not part of the core JavaScript for the viewer. Instead, viewer HTML elements are marked with <code>data-tippy-content</code> attributes that provide strings to show in their tooltips. </p>
<p>For example, the <em>Toggle 2D/3D</em> button&apos;s element looks like this:</p>
<pre><code class="lang-html"><code class="source-code prettyprint">&lt;button type=&quot;button&quot; class=&quot;xeokit-threeD xeokit-btn fa fa-cube fa-2x&quot; data-tippy-content=&quot;Toggle 2D/3D&quot;&gt;&lt;/button&gt;</code>
</code></pre>
<p>In the <a href="https://github.com/xeokit/xeokit-bim-viewer/blob/master/app/index.html">app/index.html</a> file for the standalone viewer, we&apos;re using <a href="https://github.com/atomiks/tippyjs">tippy.js</a>, which automatically creates tooltips for those elements.</p>
<h3 id="customizing-appearances-of-ifc-types">Customizing Appearances of IFC Types</h3><p>The viewer loads colors for the various IFC element types straight from the IFC model, except where overrides are defined in the configuration file <a href="src/IFCObjectDefaults/IFCObjectDefaults.js">src/IFCObjectDefaults/IFCObjectDefaults.js</a>.</p>
<p>You can add or remove configurations in that file if you need to customize the color or pickability of specific IFC types.</p>
<p>For example, to ensure that <code>IfcWindow</code> and <code>IfcSpace</code> types are initially visible, transparent and pickable (ie. able to be selected by clicking on them), you might configure that file as shown below:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const IFCObjectDefaults = {
    IfcSpace: { 
        visible: true,
        pickable: true,
        opacity: 0.2
    },
    IfcWindow: { 
        visible: true,
        pickable: true,
        opacity: 0.5
    }
};

export {IFCObjectDefaults};</code>
</code></pre>
<p>Sometimes IFC models have opaque <code>IfcWindow</code> and <code>IfcSpace</code> elements, so it&apos;s a good idea to have configurations in there so that we can see through them.</p>
<h2 id="building">Building</h2><p>To install the npm package:</p>
<pre><code><code class="source-code prettyprint">sudo npm install</code>
</code></pre><p>Building ES6 module in <code>/dist/main.js</code>:</p>
<pre><code><code class="source-code prettyprint">npm run build</code>
</code></pre><p>Building API documentation in <code>/docs/</code>:</p>
<pre><code><code class="source-code prettyprint">npm run docs</code>
</code></pre></div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
